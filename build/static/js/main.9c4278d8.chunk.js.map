{"version":3,"sources":["firebase.js","contexts/AuthContext.js","components/Chats.js","components/Login.js","components/App.js","index.js"],"names":["auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","AuthContext","React","createContext","AuthProvider","_ref","children","loading","setLoading","useState","user","setUser","history","useHistory","useEffect","onAuthStateChanged","push","value","createElement","Provider","Chats","useContext","axios","get","headers","process","email","uid","then","catch","formdata","FormData","append","async","response","fetch","url","data","blob","File","type","getFile","photoURL","avatar","name","post","error","console","log","className","onClick","signOut","ChatEngine","height","projectID","userName","userSecret","Login","id","signInWithRedirect","GoogleAuthProvider","GoogleOutlined","FacebookAuthProvider","FacebookOutlined","App","style","fontFamily","Router","Switch","Route","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9c4278d8.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\n\r\nexport const auth = firebase.initializeApp({\r\n    apiKey: \"AIzaSyDOLOAj-Vsvj7oVGD0D5eCLFDyCb7OboV4\",\r\n    authDomain: \"chatdorm-ce4f3.firebaseapp.com\",\r\n    projectId: \"chatdorm-ce4f3\",\r\n    storageBucket: \"chatdorm-ce4f3.appspot.com\",\r\n    messagingSenderId: \"159186340639\",\r\n    appId: \"1:159186340639:web:2b2208616f148933e7fe2a\"\r\n  }).auth();","import React, { useContext, useState, useEffect} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from \"../firebase\";\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [loading, setLoading] = useState(true);\r\n    const [user, setUser] = useState(null);\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        auth.onAuthStateChanged((user) => {\r\n            setUser(user);\r\n            setLoading(false);\r\n            if(user) history.push('/chats');\r\n        })\r\n    }, [user, history]);\r\n    \r\n    const value = { user };\r\n\r\n    return(\r\n        <AuthContext.Provider value={value}>\r\n           {!loading && children}\r\n        </AuthContext.Provider>\r\n    );\r\n}","import React, { useRef, useState, useEffect} from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Avatar, ChatEngine } from 'react-chat-engine';\r\nimport { auth } from '../firebase';\r\n\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport axios from 'axios';\r\n\r\n\r\nconst Chats = () =>{\r\n    const history =useHistory();\r\n    const { user } = useAuth();\r\n    const { loading, setLoading } = useState(true);\r\n\r\n    const handlelogout = async () => {\r\n        await auth.signOut();\r\n\r\n        history.push('/');\r\n    }\r\nuseEffect(() => {\r\n    if(!user){\r\n        history.push('/');\r\n\r\n        return;\r\n    }\r\n\r\n    const getFile = async(url) => {\r\n        const response = await fetch(url);\r\n        const data = await response.blob();\r\n\r\n        return new File([data], \"userPhoto.jpg\",{type: 'image/jpeg '})\r\n    }\r\n\r\n    axios.get('https://api.chatengine.io/users/me',{\r\n        headers: {\r\n            \"project-id\":process.env.REACT_APP_CHAT_ENGINE_ID,\r\n            \"user-name\" : user.email,\r\n            \"user-secret\" : user.uid,\r\n        }\r\n    })\r\n    .then(() =>{\r\n        setLoading(false);\r\n    })\r\n    .catch(() => {\r\n        let formdata = new FormData();\r\n        formdata.append('email', user.email);\r\n        formdata.append('username', user.email);\r\n        formdata.append('secret', user.uid);\r\n\r\n        getFile(user.photoURL)\r\n        .then((avatar) => {\r\n            formdata.append('avatar',avatar,avatar.name);\r\n\r\n            axios.post('https://api.chatengine.io/users',formdata,\r\n            { headers: { \"private-key\":process.env.REACT_APP_CHAT_ENGINE_KEY }}\r\n            )\r\n        .then(() => setLoading(false))\r\n        .catch((error) => console.log(error))\r\n\r\n        })\r\n    })\r\n}, [user, history]);\r\n if(!user || loading) return 'loading...';\r\n    return(\r\n       <div className='chats-page'>\r\n          <div className='nav-bar'>\r\n            <div className='logo-tab'>\r\n                  ChatDorm\r\n            </div>\r\n            <div onClick={handlelogout} className='logout-tab'>\r\n                Logout\r\n            </div>\r\n          </div>\r\n          <ChatEngine\r\n          height=\"calc(100vh - 66px)\"\r\n          projectID={process.env.REACT_APP_CHAT_ENGINE_ID}\r\n          userName={user.email}\r\n          userSecret={user.uid}\r\n          />\r\n       </div>\r\n    );\r\n}\r\n\r\nexport default Chats;","import React from 'react';\r\nimport { GoogleOutlined, FacebookOutlined } from '@ant-design/icons';\r\nimport \"firebase/app\";\r\n\r\nimport { auth } from \"../firebase\";\r\nimport firebase from 'firebase/app';\r\n\r\n\r\nconst Login = () => {\r\n    return (\r\n         <div id=\"login-page\">\r\n           <div id=\"login-card\">\r\n               <h2>Welcome to ChatDorm !! </h2>\r\n\r\n               <div\r\n                  className=\"login-button google\"\r\n                  onClick={() => auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())}\r\n               >\r\n                  <GoogleOutlined />Sign In with Google\r\n\r\n               </div>\r\n\r\n               <br/> <br/>\r\n\r\n               <div\r\n                  className=\"login-button facebook\"\r\n                  onClick={() => auth.signInWithRedirect(new firebase.auth.FacebookAuthProvider())}\r\n               >\r\n                  <FacebookOutlined />Sign In with Facebook\r\n\r\n               </div>\r\n           </div>\r\n         </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Login;","import React from \"react\"\n\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\n\nimport { AuthProvider } from \"../contexts/AuthContext\";\n\nimport Chats from \"./Chats\"\nimport Login from \"./Login\"\n\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Avenir' }}>\n      <Router>\n         <AuthProvider> \n          <Switch>\n            <Route path=\"/chats\" component={Chats} />\n            <Route path=\"/\" component={Login} /> \n          </Switch>\n         </AuthProvider> \n      </Router>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}