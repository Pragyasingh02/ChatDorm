(this["webpackJsonpunichat-template"]=this["webpackJsonpunichat-template"]||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),o=a.n(r),l=(a(57),a(21)),i=a(4),s=a(13),u=a.n(s);a(60);const m=u.a.initializeApp({apiKey:"AIzaSyDOLOAj-Vsvj7oVGD0D5eCLFDyCb7OboV4",authDomain:"chatdorm-ce4f3.firebaseapp.com",projectId:"chatdorm-ce4f3",storageBucket:"chatdorm-ce4f3.appspot.com",messagingSenderId:"159186340639",appId:"1:159186340639:web:2b2208616f148933e7fe2a"}).auth(),d=c.a.createContext(),h=e=>{let{children:t}=e;const[a,r]=Object(n.useState)(!0),[o,l]=Object(n.useState)(null),s=Object(i.f)();Object(n.useEffect)(()=>{m.onAuthStateChanged(e=>{l(e),r(!1),e&&s.push("/chats")})},[o,s]);const u={user:o};return c.a.createElement(d.Provider,{value:u},!a&&t)};var p=a(50),b=a(3),g=a.n(b);var E=()=>{const e=Object(i.f)(),{user:t}=Object(n.useContext)(d),{loading:a,setLoading:r}=Object(n.useState)(!0);return Object(n.useEffect)(()=>{if(!t)return void e.push("/");g.a.get("https://api.chatengine.io/users/me",{headers:{"project-id":"f6b828bb-b1eb-47e1-860d-a855efdb7c5c","user-name":t.email,"user-secret":t.uid}}).then(()=>{r(!1)}).catch(()=>{let e=new FormData;e.append("email",t.email),e.append("username",t.email),e.append("secret",t.uid),(async e=>{const t=await fetch(e),a=await t.blob();return new File([a],"userPhoto.jpg",{type:"image/jpeg "})})(t.photoURL).then(t=>{e.append("avatar",t,t.name),g.a.post("https://api.chatengine.io/users",e,{headers:{"private-key":"5d36db5f-0be3-4332-834e-21a54074be59"}}).then(()=>r(!1)).catch(e=>console.log(e))})})},[t,e]),!t||a?"loading...":c.a.createElement("div",{className:"chats-page"},c.a.createElement("div",{className:"nav-bar"},c.a.createElement("div",{className:"logo-tab"},"ChatDorm"),c.a.createElement("div",{onClick:async()=>{await m.signOut(),e.push("/")},className:"logout-tab"},"Logout")),c.a.createElement(p.d,{height:"calc(100vh - 66px)",projectID:"f6b828bb-b1eb-47e1-860d-a855efdb7c5c",userName:t.email,userSecret:t.uid}))},f=a(114),v=a(115);var j=()=>c.a.createElement("div",{id:"login-page"},c.a.createElement("div",{id:"login-card"},c.a.createElement("h2",null,"Welcome to ChatDorm !! "),c.a.createElement("div",{className:"login-button google",onClick:()=>m.signInWithRedirect(new u.a.auth.GoogleAuthProvider)},c.a.createElement(f.a,null),"Sign In with Google"),c.a.createElement("br",null)," ",c.a.createElement("br",null),c.a.createElement("div",{className:"login-button facebook",onClick:()=>m.signInWithRedirect(new u.a.auth.FacebookAuthProvider)},c.a.createElement(v.a,null),"Sign In with Facebook")));var w=function(){return c.a.createElement("div",{style:{fontFamily:"Avenir"}},c.a.createElement(l.a,null,c.a.createElement(h,null,c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/chats",component:E}),c.a.createElement(i.a,{path:"/",component:j})))))};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root"))},52:function(e,t,a){e.exports=a(112)},57:function(e,t,a){}},[[52,1,2]]]);
//# sourceMappingURL=main.9c4278d8.chunk.js.map